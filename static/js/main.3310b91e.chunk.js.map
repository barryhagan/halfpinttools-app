{"version":3,"sources":["dropzone/baseline-cloud_upload-24px.svg","upload/baseline-check_circle_outline-24px.svg","dropzone/Dropzone.js","progress/Progress.js","upload/Upload.js","App.js","index.js"],"names":["module","exports","Dropzone","props","state","hightlight","fileInputRef","React","createRef","openFileDialog","bind","onFilesAdded","onDragOver","onDragLeave","onDrop","this","disabled","current","click","evt","files","target","array","fileListToArray","event","preventDefault","disabed","setState","dataTransfer","list","i","length","push","item","className","onClick","style","cursor","ref","type","multiple","onChange","alt","src","uploadIcon","Component","Progress","width","progress","Upload","uploading","uploadProgress","successfullUploaded","uploadFiles","sendRequest","renderActions","prevState","concat","promises","forEach","file","Promise","all","resolve","reject","req","XMLHttpRequest","upload","addEventListener","lengthComputable","copy","name","percentage","loaded","total","response","formData","FormData","append","open","send","opacity","href","process","map","key","renderProgress","App","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.3310b91e.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/baseline-cloud_upload-24px.3f7e59cc.svg\";","module.exports = __webpack_public_path__ + \"static/media/baseline-check_circle_outline-24px.e0d99bb4.svg\";","import React, { Component } from \"react\";\r\nimport \"./Dropzone.css\";\r\nimport uploadIcon from \"./baseline-cloud_upload-24px.svg\";\r\n\r\nclass Dropzone extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { hightlight: false };\r\n    this.fileInputRef = React.createRef();\r\n\r\n    this.openFileDialog = this.openFileDialog.bind(this);\r\n    this.onFilesAdded = this.onFilesAdded.bind(this);\r\n    this.onDragOver = this.onDragOver.bind(this);\r\n    this.onDragLeave = this.onDragLeave.bind(this);\r\n    this.onDrop = this.onDrop.bind(this);\r\n  }\r\n\r\n  openFileDialog() {\r\n    if (this.props.disabled) return;\r\n    this.fileInputRef.current.click();\r\n  }\r\n\r\n  onFilesAdded(evt) {\r\n    if (this.props.disabled) return;\r\n    const files = evt.target.files;\r\n    if (this.props.onFilesAdded) {\r\n      const array = this.fileListToArray(files);\r\n      this.props.onFilesAdded(array);\r\n    }\r\n  }\r\n\r\n  onDragOver(event) {\r\n    event.preventDefault();\r\n    if (this.props.disabed) return;\r\n    this.setState({ hightlight: true });\r\n  }\r\n\r\n  onDragLeave(event) {\r\n    this.setState({ hightlight: false });\r\n  }\r\n\r\n  onDrop(event) {\r\n    event.preventDefault();\r\n    if (this.props.disabed) return;\r\n    const files = event.dataTransfer.files;\r\n    if (this.props.onFilesAdded) {\r\n      const array = this.fileListToArray(files);\r\n      this.props.onFilesAdded(array);\r\n    }\r\n    this.setState({ hightlight: false });\r\n  }\r\n\r\n  fileListToArray(list) {\r\n    const array = [];\r\n    for (var i = 0; i < list.length; i++) {\r\n      array.push(list.item(i));\r\n    }\r\n    return array;\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div\r\n        className={`Dropzone ${this.state.hightlight ? \"Highlight\" : \"\"}`}\r\n        onDragOver={this.onDragOver}\r\n        onDragLeave={this.onDragLeave}\r\n        onDrop={this.onDrop}\r\n        onClick={this.openFileDialog}\r\n        style={{ cursor: this.props.disabled ? \"default\" : \"pointer\" }}\r\n      >\r\n        <input\r\n          ref={this.fileInputRef}\r\n          className=\"FileInput\"\r\n          type=\"file\"\r\n          multiple\r\n          onChange={this.onFilesAdded}\r\n        />\r\n        <img alt=\"upload\" className=\"Icon\" src={uploadIcon} />\r\n        <span>Upload Excel .xlsx</span>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Dropzone;\r\n","import React, { Component } from \"react\";\r\nimport \"./Progress.css\";\r\n\r\nclass Progress extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {};\r\n  }\r\n  render() {\r\n    return (\r\n      <div className=\"ProgressBar\">\r\n        <div\r\n          className=\"Progress\"\r\n          style={{ width: this.props.progress + \"%\" }}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Progress;\r\n","import React, { Component } from \"react\";\r\nimport Dropzone from \"../dropzone/Dropzone\";\r\nimport \"./Upload.css\";\r\nimport Progress from \"../progress/Progress\";\r\nimport uploadIcon from \"./baseline-check_circle_outline-24px.svg\";\r\n\r\nclass Upload extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      files: [],\r\n      uploading: false,\r\n      uploadProgress: {},\r\n      successfullUploaded: false\r\n    };\r\n\r\n    this.onFilesAdded = this.onFilesAdded.bind(this);\r\n    this.uploadFiles = this.uploadFiles.bind(this);\r\n    this.sendRequest = this.sendRequest.bind(this);\r\n    this.renderActions = this.renderActions.bind(this);\r\n  }\r\n\r\n  onFilesAdded(files) {\r\n    this.setState(prevState => ({\r\n      files: prevState.files.concat(files)\r\n    }));\r\n  }\r\n\r\n  async uploadFiles() {\r\n    this.setState({ uploadProgress: {}, uploading: true });\r\n    const promises = [];\r\n    this.state.files.forEach(file => {\r\n      promises.push(this.sendRequest(file));\r\n    });\r\n    try {\r\n      await Promise.all(promises);\r\n\r\n      this.setState({ successfullUploaded: true, uploading: false });\r\n    } catch (e) {\r\n      // Not Production ready! Do some error handling here instead...\r\n      this.setState({ successfullUploaded: true, uploading: false });\r\n    }\r\n  }\r\n\r\n  sendRequest(file) {\r\n    return new Promise((resolve, reject) => {\r\n      const req = new XMLHttpRequest();\r\n\r\n      req.upload.addEventListener(\"progress\", event => {\r\n        if (event.lengthComputable) {\r\n          const copy = { ...this.state.uploadProgress };\r\n          copy[file.name] = {\r\n            state: \"pending\",\r\n            percentage: (event.loaded / event.total) * 100\r\n          };\r\n          this.setState({ uploadProgress: copy });\r\n        }\r\n      });\r\n\r\n      req.upload.addEventListener(\"load\", event => {\r\n        const copy = { ...this.state.uploadProgress };\r\n        copy[file.name] = { state: \"done\", percentage: 100 };\r\n        this.setState({ uploadProgress: copy });\r\n        resolve(req.response);\r\n      });\r\n\r\n      req.upload.addEventListener(\"error\", event => {\r\n        const copy = { ...this.state.uploadProgress };\r\n        copy[file.name] = { state: \"error\", percentage: 0 };\r\n        this.setState({ uploadProgress: copy });\r\n        reject(req.response);\r\n      });\r\n\r\n      const formData = new FormData();\r\n      formData.append(\"file\", file, file.name);\r\n\r\n      req.open(\r\n        \"POST\",\r\n        \"https://ac6gag1rsl.execute-api.us-east-2.amazonaws.com/Prod/api/consignor/createlabels\"\r\n      );\r\n      req.send(formData);\r\n    });\r\n  }\r\n\r\n  renderProgress(file) {\r\n    const uploadProgress = this.state.uploadProgress[file.name];\r\n    if (this.state.uploading || this.state.successfullUploaded) {\r\n      return (\r\n        <div className=\"ProgressWrapper\">\r\n          <Progress progress={uploadProgress ? uploadProgress.percentage : 0} />\r\n          <img\r\n            className=\"CheckIcon\"\r\n            alt=\"done\"\r\n            src={uploadIcon}\r\n            style={{\r\n              opacity:\r\n                uploadProgress && uploadProgress.state === \"done\" ? 0.5 : 0\r\n            }}\r\n          />\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  renderActions() {\r\n    if (this.state.successfullUploaded) {\r\n      return (\r\n        <button\r\n          onClick={() =>\r\n            this.setState({ files: [], successfullUploaded: false })\r\n          }\r\n        >\r\n          Clear\r\n        </button>\r\n      );\r\n    } else if (this.state.files.length > 0) {\r\n      return (\r\n        <button\r\n          disabled={this.state.files.length < 0 || this.state.uploading}\r\n          onClick={this.uploadFiles}\r\n        >\r\n          Generate\r\n        </button>\r\n      );\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"Upload\">\r\n        <h2>Half Pint Consignor Label Maker</h2>\r\n        <div className=\"Title\">STEP 1</div>\r\n        <div>\r\n          Create your inventory spreadsheet. You can download an example to get\r\n          started{\" \"}\r\n          <a\r\n            href={process.env.PUBLIC_URL + \"/Consignor_Inventory_TEMPLATE.xlsx\"}\r\n          >\r\n            here\r\n          </a>\r\n          .\r\n        </div>\r\n        <div className=\"Title\">STEP 2</div>\r\n        <div>Upload your inventory spreadsheet.</div>\r\n        <div className=\"Content\">\r\n          <div>\r\n            <Dropzone\r\n              onFilesAdded={this.onFilesAdded}\r\n              disabled={this.state.uploading || this.state.successfullUploaded}\r\n            />\r\n          </div>\r\n          <div className=\"Files\">\r\n            {this.state.files.map(file => {\r\n              return (\r\n                <div key={file.name} className=\"Row\">\r\n                  <span className=\"Filename\">{file.name}</span>\r\n                  {this.renderProgress(file)}\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n        </div>\r\n        <div className=\"Actions\">{this.renderActions()}</div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Upload;\r\n","import React, { Component } from \"react\";\nimport \"./App.css\";\nimport Upload from \"./upload/Upload\";\n\nclass App extends Component {\n  render() {\n    return (\n      <div className=\"App\">\n        <div className=\"Card\">\n          <Upload />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}